
# Martes 04-02-2025

# UD4. Construcción de guiones de administración

- **12:45 - 13:45**: Sesión 45

## Qué trataremos
Os propongo algunos ejercicios de disparadores:
- Crea una tabla de nombre **contador** con el diguiente DDL:
```sql
CREATE TABLE contador (
    id INT AUTO_INCREMENT PRIMARY KEY,
    tipo VARCHAR(100),
    valor INT
);
```
Añade las siguientes dos filas:
```sql
INSERT INTO contador (tipo, valor) VALUES ('numEmpleados', 0);
INSERT INTO contador (tipo, valor) VALUES ('numDepartamentos', 0);
```
1. Crea los triggres necesarios (**cuenta_empleados** y **cuenta_departamentos**) para que cada vez que haya alguna operación que modifique (inserte o elimine) el número de empleados o de departamentos, se actualice el número total de los mismos en la tabla contador.

2. Crea un disparador sobre la tabla employees llamado **actualiza_salaries** de tal forma que cada vez que se inserte un empleado en employees, se inserten en la tabla salaries los siguientes valores:

```markdown
| employee_id | salary | from_date  | to_date    |
|-------------|--------|------------|------------|
| emp_no      | 30000  | hire_date  |'9999-01-01'|
```

3. Ejecuta la orden SQL que muestre los triggers creados en la tabla **employees**.

4. Ejecuta la orden SQL que muestre la información de cada uno de los trigger del ejercicio 1.

## Recursos
[1] [Disparadores en MySQL
](https://wiki.cifprodolfoucha.es/index.php?title=Mysql_Triggers).


## Tareas
Haréis algunos ejercicios de disparadores.